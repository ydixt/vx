!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("react"),require("prop-types"),require("@vx/event")):"function"==typeof define&&define.amd?define(["exports","react","prop-types","@vx/event"],e):e(t.vx=t.vx||{},t.React,t.PropTypes,t.vx)}(this,function(t,o,e,i){"use strict";function r(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(n){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{},e=Object.keys(s);"function"==typeof Object.getOwnPropertySymbols&&(e=e.concat(Object.getOwnPropertySymbols(s).filter(function(t){return Object.getOwnPropertyDescriptor(s,t).enumerable}))),e.forEach(function(t){var e,a,r;e=n,r=s[a=t],a in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r})}return n}function n(t){return(n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t){return function(t){if(Array.isArray(t)){for(var e=0,a=new Array(t.length);e<t.length;e++)a[e]=t[e];return a}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function a(){return{scaleX:1,scaleY:1,translateX:0,translateY:0,skewX:0,skewY:0}}function f(t){var e=t.scaleX,a=void 0===e?1:e,r=t.scaleY,n=void 0===r?1:r,s=t.translateX,i=void 0===s?0:s,o=t.translateY,l=void 0===o?0:o,c=t.skewX,u=void 0===c?0:c,f=t.skewY;return{scaleX:a,scaleY:n,translateX:i,translateY:l,skewX:u,skewY:void 0===f?0:f}}function h(t){var e=t.scaleX,a=t.scaleY,r=t.translateX,n=t.translateY,s=t.skewX,i=t.skewY,o=e*a-i*s;return{scaleX:a/o,scaleY:e/o,translateX:(a*r-s*n)/-o,translateY:(i*r-e*n)/o,skewX:s/-o,skewY:i/-o}}function v(t,e){var a=e.x,r=e.y;return{x:t.scaleX*a+t.skewX*r+t.translateX,y:t.skewY*a+t.scaleY*r+t.translateY}}function p(t,e){var a=e.x,r=e.y;return v(h(t),{x:a,y:r})}function y(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:void 0;return f({scaleX:t,scaleY:e=e||t})}function d(t,e){return f({translateX:t,translateY:e})}function Y(t,e){return{scaleX:t.scaleX*e.scaleX+t.skewX*e.skewY,scaleY:t.skewY*e.skewX+t.scaleY*e.scaleY,translateX:t.scaleX*e.translateX+t.skewX*e.translateY+t.translateX,translateY:t.skewY*e.translateX+t.scaleY*e.translateY+t.translateY,skewX:t.scaleX*e.skewX+t.skewX*e.scaleY,skewY:t.skewY*e.scaleX+t.scaleY*e.skewY}}function X(){for(var t=arguments.length,e=new Array(t),a=0;a<t;a++)e[a]=arguments[a];switch(e.length){case 0:throw new Error("composeMatrices() requires arguments: was called with no args");case 1:return e[0];case 2:return Y(e[0],e[1]);default:var r=e[0],n=e[1],s=e.slice(2),i=Y(r,n);return X.apply(void 0,[i].concat(u(s)))}}o=o&&o.hasOwnProperty("default")?o.default:o,e=e&&e.hasOwnProperty("default")?e.default:e;var x=function(){function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=function(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?c(t):e}(this,n(a).call(this,t))).state={initialTransformMatrix:t.transformMatrix,transformMatrix:t.transformMatrix,isDragging:!1},e.toString=e.toString.bind(c(e)),e.clear=e.clear.bind(c(e)),e.center=e.center.bind(c(e)),e.handleWheel=e.handleWheel.bind(c(e)),e.dragStart=e.dragStart.bind(c(e)),e.dragMove=e.dragMove.bind(c(e)),e.dragEnd=e.dragEnd.bind(c(e)),e.reset=e.reset.bind(c(e)),e.constrain=t.constrain?t.constrain.bind(c(e)):e.constrain.bind(c(e)),e.scale=e.scale.bind(c(e)),e.translate=e.translate.bind(c(e)),e.translateTo=e.translateTo.bind(c(e)),e.setTranslate=e.setTranslate.bind(c(e)),e.setTransformMatrix=e.setTransformMatrix.bind(c(e)),e.invert=e.invert.bind(c(e)),e.applyToPoint=e.applyToPoint.bind(c(e)),e.applyInverseToPoint=e.applyInverseToPoint.bind(c(e)),e.toStringInvert=e.toStringInvert.bind(c(e)),e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(a,o.Component),function(t,e,a){e&&r(t.prototype,e),a&&r(t,a)}(a,[{key:"componentDidMount",value:function(){var t=this.props.passive;this.containerRef&&!t&&this.containerRef.addEventListener("wheel",this.handleWheel,{passive:!1})}},{key:"componentWillUnmount",value:function(){var t=this.props.passive;this.containerRef&&!t&&this.containerRef.removeEventListener("wheel",this.handleWheel,{passive:!1})}},{key:"applyToPoint",value:function(t){var e=t.x,a=t.y;return v(this.state.transformMatrix,{x:e,y:a})}},{key:"applyInverseToPoint",value:function(t){var e=t.x,a=t.y;return p(this.state.transformMatrix,{x:e,y:a})}},{key:"reset",value:function(){var t=this.state.initialTransformMatrix;this.setTransformMatrix(t)}},{key:"scale",value:function(t){var e=t.scaleX,a=t.scaleY,r=t.point;a=a||e;var n=this.state.transformMatrix,s=this.props,i=s.width,o=s.height,l=p(n,r=r||{x:i/2,y:o/2}),c=X(n,d(l.x,l.y),y(e,a),d(-l.x,-l.y));this.setTransformMatrix(c)}},{key:"translate",value:function(t){var e=t.translateX,a=t.translateY,r=X(this.state.transformMatrix,d(e,a));this.setTransformMatrix(r)}},{key:"translateTo",value:function(t){var e=t.x,a=t.y,r=p(this.state.transformMatrix,{x:e,y:a});this.setTranslate({translateX:r.x,translateY:r.y})}},{key:"setTranslate",value:function(t){var e=t.translateX,a=t.translateY,r=l({},this.state.transformMatrix,{translateX:e,translateY:a});this.setTransformMatrix(r)}},{key:"setTransformMatrix",value:function(e){var a=this;this.setState(function(t){return{transformMatrix:a.constrain(e,t.transformMatrix)}})}},{key:"invert",value:function(){return h(this.state.transformMatrix)}},{key:"toStringInvert",value:function(){var t=this.invert(),e=t.translateX,a=t.translateY,r=t.scaleX,n=t.scaleY,s=t.skewX,i=t.skewY;return"matrix(".concat(r,", ").concat(i,", ").concat(s,", ").concat(n,", ").concat(e,", ").concat(a,")")}},{key:"constrain",value:function(t,e){var a=this.props,r=a.scaleXMin,n=a.scaleXMax,s=a.scaleYMin,i=a.scaleYMax,o=(a.constrain,t.scaleX),l=t.scaleY;return n<o||o<r||(i<l||l<s)?e:t}},{key:"dragStart",value:function(t){var e=this.state.transformMatrix,a=e.translateX,r=e.translateY;this.startPoint=i.localPoint(t),this.startTranslate={translateX:a,translateY:r},this.setState({isDragging:!0})}},{key:"dragMove",value:function(t){if(this.state.isDragging){var e=i.localPoint(t),a=-(this.startPoint.x-e.x),r=-(this.startPoint.y-e.y);this.setTranslate({translateX:this.startTranslate.translateX+a,translateY:this.startTranslate.translateY+r})}}},{key:"dragEnd",value:function(t){this.startPoint=void 0,this.startTranslate=void 0,this.setState({isDragging:!1})}},{key:"handleWheel",value:function(t){this.props.passive||t.preventDefault();var e=this.props.wheelDelta,a=i.localPoint(t),r=e(t),n=r.scaleX,s=r.scaleY;this.scale({scaleX:n,scaleY:s,point:a})}},{key:"toString",value:function(){var t=this.state.transformMatrix,e=t.translateX,a=t.translateY,r=t.scaleX,n=t.scaleY,s=t.skewX,i=t.skewY;return"matrix(".concat(r,", ").concat(i,", ").concat(s,", ").concat(n,", ").concat(e,", ").concat(a,")")}},{key:"center",value:function(){var t=this.props,e={x:t.width/2,y:t.height/2},a=this.applyInverseToPoint(e);this.translate({translateX:a.x-e.x,translateY:a.y-e.y})}},{key:"clear",value:function(){this.setTransformMatrix({scaleX:1,scaleY:1,translateX:0,translateY:0,skewX:0,skewY:0})}},{key:"render",value:function(){var e=this,t=this.props,a=t.passive,r=t.children,n=t.style,s=t.className,i=l({},this.state,{center:this.center,clear:this.clear,scale:this.scale,scaleTo:this.scaleTo,translate:this.translate,translateTo:this.translateTo,setTranslate:this.setTranslate,setTransformMatrix:this.setTransformMatrix,reset:this.reset,handleWheel:this.handleWheel,dragEnd:this.dragEnd,dragMove:this.dragMove,dragStart:this.dragStart,toString:this.toString,invert:this.invert,toStringInvert:this.toStringInvert,applyToPoint:this.applyToPoint,applyInverseToPoint:this.applyInverseToPoint});return a?r(i):o.createElement("div",{ref:function(t){e.containerRef=t},style:n,className:s},r(i))}}]),a}();x.propTypes={children:e.func.isRequired,width:e.number.isRequired,height:e.number.isRequired,wheelDelta:e.func,scaleXMin:e.number,scaleXMax:e.number,scaleYMin:e.number,scaleYMax:e.number,constrain:e.func,transformMatrix:e.shape({scaleX:e.number,scaleY:e.number,translateX:e.number,translateY:e.number,skewX:e.number,skewY:e.number}),passive:e.bool,style:e.object,className:e.string},x.defaultProps={passive:!1,scaleXMin:0,scaleXMax:1/0,scaleYMin:0,scaleYMax:1/0,transformMatrix:{scaleX:1,scaleY:1,translateX:0,translateY:0,skewX:0,skewY:0},wheelDelta:function(t){return 0<-t.deltaY?{scaleX:1.1,scaleY:1.1}:{scaleX:.9,scaleY:.9}},style:void 0,className:void 0},t.Zoom=x,t.identityMatrix=a,t.createMatrix=f,t.inverseMatrix=h,t.applyMatrixToPoint=v,t.applyInverseMatrixToPoint=p,t.scaleMatrix=y,t.translateMatrix=d,t.multiplyMatrices=Y,t.composeMatrices=X,Object.defineProperty(t,"__esModule",{value:!0})});
